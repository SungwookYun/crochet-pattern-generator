# 🧶 코바늘 도안 생성기 OpenAI 모델 파인튜닝 계획서

## 📊 현재 상황 분석

### 사용 중인 모델
- **기본 모델**: `gpt-4o` (Vision 지원)
- **주요 기능**: 이미지 분석 → 코바늘 도안 생성
- **프롬프트 종류**: 
  - 단일 이미지용 프롬프트 (server.js line 298)
  - 다중 이미지용 프롬프트 (server.js line 485)

### 현재 프롬프트의 한계점
1. **일관성 부족**: 매번 다른 스타일의 도안 생성
2. **전문성 부족**: 뜨개질 전문 용어와 기법 설명 부족
3. **구조화 부족**: 도안의 단계별 설명이 불완전
4. **정확성 문제**: 실제 재현하기 어려운 도안 생성

## 🎯 파인튜닝 목표

### 핵심 개선사항
1. **전문성 향상**: 뜨개질 전문가 수준의 도안 생성
2. **일관성 확보**: 항상 동일한 구조와 품질의 도안 제공
3. **정확성 증대**: 실제 재현 가능한 정확한 도안 생성
4. **사용자 친화성**: 초보자도 이해할 수 있는 상세한 설명

## 📝 훈련 데이터 준비 전략

### 1. 데이터 수집 방법

#### A. 기존 사용자 데이터 활용
```json
{
  "messages": [
    {
      "role": "system", 
      "content": "당신은 30년 경력의 코바늘 전문가입니다. 이미지를 보고 정확하고 상세한 도안을 작성하세요."
    },
    {
      "role": "user",
      "content": [
        {"type": "text", "text": "이 코바늘 작품의 도안을 작성해주세요."},
        {"type": "image_url", "image_url": {"url": "data:image/jpeg;base64,..."}}
      ]
    },
    {
      "role": "assistant",
      "content": "**🔍 작품 분석**\n이 작품은 아미구루미 기법으로 제작된 토끼 인형입니다...\n\n**📏 치수와 구조**\n- 완성 크기: 높이 15cm\n- 머리둘레: 약 12cm\n...[전문적인 도안 내용]"
    }
  ]
}
```

#### B. 전문 도안 데이터 추가
- 검증된 뜨개질 도안 사이트에서 수집
- 전문가가 작성한 도안을 JSON Lines 형태로 변환
- 이미지-도안 쌍 데이터 최소 500개 이상 확보

### 2. 데이터 품질 기준

#### 높은 품질의 도안 특징
✅ **구조적 완성도**
- 재료 명시 (실 종류, 굵기, 색상, 사용량)
- 도구 명시 (코바늘 호수, 추가 도구)
- 완성 크기 명시

✅ **기술적 정확성**
- 정확한 스티치 표기 (한국식 용어 사용)
- 단계별 코 수 계산 정확성
- 증가/감소 위치 명확성

✅ **사용자 친화성**
- 단계별 상세 설명
- 초보자를 위한 팁 포함
- 문제 해결 방법 제시

## 🔧 파인튜닝 구현 방법

### 1. 단계별 진행 계획

#### 1단계: 데이터 수집 및 준비 (1-2주)
```bash
# 데이터 수집 스크립트 생성
python collect_training_data.py
```

#### 2단계: 훈련 데이터 생성 (1주)
```python
# 데이터 포맷팅 및 검증
python format_training_data.py
```

#### 3단계: 파인튜닝 실행 (2-3일)
```python
from openai import OpenAI

client = OpenAI(api_key="YOUR_API_KEY")

# 파인튜닝 작업 생성
response = client.fine_tuning.jobs.create(
    training_file="file-abc123",
    model="gpt-4o-2024-08-06",
    hyperparameters={
        "n_epochs": 3,
        "batch_size": 1,
        "learning_rate_multiplier": 2
    },
    suffix="crochet-pattern-expert"
)
```

#### 4단계: 테스트 및 검증 (1주)
- A/B 테스트로 기존 모델과 성능 비교
- 실제 사용자 피드백 수집
- 정확도 및 만족도 측정

### 2. 예상 비용 및 리소스

#### 파인튜닝 비용 (GPT-4o 기준)
- **훈련 비용**: 약 $25.00/1M tokens
- **예상 데이터량**: 500개 예시 × 평균 2000 토큰 = 1M 토큰
- **총 훈련 비용**: 약 $25-50

#### 배포 비용
- **호스팅 비용**: 기존과 동일 (시간당 $0.03)
- **사용량 비용**: $0.03/1K tokens (기존 $0.01 대비 약간 증가)

## 🚀 구현 시작하기

### 바로 시작할 수 있는 방법

1. **현재 로그 데이터 활용**
   - 기존 사용자들이 업로드한 이미지와 생성된 도안 쌍 수집
   - 품질이 좋은 도안을 선별하여 훈련 데이터로 활용

2. **점진적 개선**
   - 소량 데이터(50-100개)로 먼저 파일럿 테스트
   - 결과 확인 후 점진적으로 데이터 추가

3. **전문가 협업**
   - 뜨개질 전문가와 협업하여 고품질 도안 생성
   - 전문가 검증을 통한 훈련 데이터 품질 보장

## 📈 성과 측정 방법

### 정량적 지표
- **정확도**: 실제 재현 가능한 도안 비율
- **완성도**: 필수 정보(재료, 크기, 단계) 포함 비율
- **사용자 만족도**: 별점 평가 시스템 도입

### 정성적 지표
- **전문성**: 뜨개질 전문가의 품질 평가
- **이해도**: 초보자도 따라할 수 있는 설명 수준
- **창의성**: 다양한 패턴과 기법 활용도

## 🎯 다음 단계

현재 프로젝트에 파인튜닝을 적용하려면:

1. **훈련 데이터 생성 스크립트 작성**
2. **기존 프롬프트 개선안 테스트**
3. **파일럿 파인튜닝 실행**
4. **성능 비교 및 배포**

이 계획을 바탕으로 단계별로 진행하시겠습니까? 어떤 부분부터 시작하고 싶으신지 알려주세요! 